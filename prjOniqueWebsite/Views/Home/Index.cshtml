@{
    ViewData["Title"] = "首頁";
}

<div>
    <div class="myCarousel">
        <div class="myContainer">
            <img src="/Images/Carousel/Carousel_1.jpg">
            <img src="/Images/Carousel/Carousel_2.jpg">
            <img src="/Images/Carousel/Carousel_3.jpg">
        </div>
        <div class="shift">
            <div class="btn left" onclick="leftShift()">
                <img src="/Images/Carousel/left.png">
            </div>
            <div class="btn right" onclick="rightShift()">
                <img src="/Images/Carousel/right.png">
            </div>
        </div>
        <div class="bottom">
        </div>
    </div>
    <div class="myTitle">
        <div class="TitleIcon">
            <img src="~/images/icon/price-sticker.png" />
        </div>
        <p>
            新商品
        </p>
    </div>
    <div class="ProductWall" id="divNewArrivals">
    </div>
    <div class="myTitle">
        <div class="TitleIcon">
            <img src="~/images/icon/fire.png" />
        </div>
        <p>
            熱銷商品
        </p>
    </div>
    <div class="ProductWall">
    </div>
</div>
@section Styles{
    <link href="~/css/homepage.css" rel="stylesheet" />
}

@section Scripts{
    <script src="~/js/homepage.js"></script>
    <script>
        const divNewArrivals = document.querySelector('#divNewArrivals');

        load()

        async function load() {

            const response = await fetch('@Url.Content("~/ProductApi/NewArrivalsTop4")');
            const datas = await response.json();

            const cards = datas.map(theCard => {
                const { productName, price, photoPath }=theCard

                return (`<div class="productCard">
                        <div class="productPhoto">
                        <img src="@Url.Content("~/images/uploads/products/")${photoPath}" />
                        </div>
                        <p class="productName" id="Name">
                        ${productName}
                        </p>
                        <p class="productPrice">
                        <span id="price">${price}</span>
                        </p>
                        <div class="productIcon">
                        <div class="cardIcon">
                        <img src="@Url.Content("/images/icon/shopping_black.png")" />
                        </div>
                        <div class="cardIcon">
                        <img src="@Url.Content("~/images/icon/love.png")" />
                        </div>
                        </div>
                        </div>`)
            })

            divNewArrivals.innerHTML = cards.join("")
        }
    </script>
}